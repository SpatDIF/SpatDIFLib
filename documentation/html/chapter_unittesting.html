<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>spatdiflib: Unit Testing</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">spatdiflib
   &#160;<span id="projectnumber">specification 0.3</span>
   </div>
   <div id="projectbrief">The Spatial Sound Description Interchange Format</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('chapter_unittesting.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Unit Testing </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>Jamoma, Timothy Place &amp; Nathan Wolek</dd></dl>
<h1><a class="anchor" id="chapter_unittesting_ide"></a>
Running Tests in IDE</h1>
<p>Jamoma's Build &amp; Test system delivers a unit testing solution that allows you to "Test Early. Test Often. Test Automatically" <a href="http://pragprog.com/the-pragmatic-programmer">(Hunt &amp; Thomas 1999)</a>. Whenever tests exist within a given library, the corresponding makefiles have been configured to run these tests during each build attempt. Therefore, if any part of a test fails, the build attempt will stop and report an error. In Xcode 5, an error looks something like this:</p>
<div class="image">
<img src="TTBufferXcodeAssertionFail.png" alt="TTBufferXcodeAssertionFail.png"/>
</div>
 <p>The biggest benefit for this system is the ability to receive immediate feedback when something breaks. If a test exists and your changes to the code cause that test to fail, you get feedback from the IDE as soon as you try to build. This makes it much easier to code via <a href="http://en.wikipedia.org/wiki/Test-driven_development">test driven development</a> or <a href="http://www.jamesshore.com/Blog/Red-Green-Refactor.html">red-green-refactor</a> approach.</p>
<h1><a class="anchor" id="chapter_unittesting_ruby"></a>
Running Tests in Ruby</h1>
<p>The Ruby implementation provides another easy method to perform unit tests. In the <a href="https://github.com/jamoma/JamomaCore/tree/master/DSP/Tests/unit">Jamoma/Core/DSP/Tests</a> folder, there is a simple example (<code>gain.test.rb</code>) which looks like this:</p>
<div class="fragment"></div><!-- fragment --><p>The <code>require</code> statement loads the Jamoma Foundation. The following line instantiates the #TTGain class. Once we have an instance, we send it the test message to run the test. You can run this ruby script in the terminal by typing <code>'ruby gain.test.rb'</code> and it will quickly return the results to you.</p>
<h1><a class="anchor" id="chapter_unittesting_writingtests"></a>
Writing Tests in C++</h1>
<p>Any object inheriting from #TTDataObjectBase will inherit a 'test' message. #TTDataObjectBase defines a virtual default test method. This test will be run unless you specify your own test method. The default test method simply reports a failure because you haven't written a custom test. To define your test method, you can use the following prototype (which is the same as for any message with arguments in Jamoma):</p>
<div class="fragment"></div><!-- fragment --><p> You can then implement a test with code such as the block that follows. A test may make 'assertions' that certain conditions be true. If any of these conditions are not true, then they are logged to the console and test will fail.</p>
<div class="fragment"></div><!-- fragment --> <h1><a class="anchor" id="chapter_unittesting_faq"></a>
Further Considerations</h1>
<p>The following section is an attempt to anticipate developer questions about unit testing and provide brief answers. If your question is not answered below, please do not hesitate to contact the authors.</p>
<p><b>If an assertion fails, what happens to the build attempt?</b> Be aware that a project will not build if it contains a test assertion that fails. You should either solve the problem so that it passes OR comment out the assertion and log an issue in <a href="https://github.com/jamoma/JamomaCore/issues?state=open">our GitHub repository</a>.</p>
<p><b>I am noticing an odd behavior in a specific class. How can I test it?</b> If no test currently exists, create a new test that demonstrates the problem and fails each time you build. You can then set out to work on a fix and know immediately when you have a solution, because the project will build upon success.</p>
<p><b>I am adding a class to a project. How can I make sure it will leverage the Build &amp; Test system?</b> The most important requirement is that you design tests at the <em>same time</em> you design your class. You must then make sure that your class includes the designated tag for that project, which can be easily found in the <code>test.cpp</code> file of the relevant directory.</p>
<p><b>I am creating a new library or extension. How can I make sure it will leverage the Build &amp; Test system?</b> This is more involved than simply adding a class, but the most important requirement is to establish a unique tag for the library and a customized <code>test.cpp</code> file. Consult one of the authors above for further advice on how to go about creating a new library that uses Build &amp; Test. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Feb 6 2014 15:45:42 for spatdiflib by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.2 </li>
  </ul>
</div>
</body>
</html>
